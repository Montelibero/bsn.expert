{% extends "page.twig" %}

{% block title %}{{ tag_name }} — {{ 'account_and_tag.header'|trans }} - {{ account_display_name }} — Accounts{% endblock %}

{% block breadcrumbs %}
    <li><a href="/" aria-current="page">BSN</a></li>
    <li><a href="/accounts/" aria-current="page">Accounts</a></li>
    <li><a href="/accounts/{{ account_id }}" aria-current="page">{{ account_short_id }}</a></li>
    <li><a href="/accounts/{{ account_id }}/and" aria-current="page">{{ 'account_and_tag.header'|trans }}</a></li>
    <li class="is-active"><a href="#" aria-current="page">{{ tag_name }}</a></li>
{% endblock %}

{% block content %}
    <h1 class="title">
        {{ account_display_name }}<br>
        {{ 'account_and_tag.header'|trans }}<br>
        {{ tag_name }}
    </h1>

    <p class="block">{{ 'account_and_tag.description'|trans }}</p>

    {% if only_paired %}
    <p class="block">
        🟢 {{ 'account_and_tag.only_paired'|trans }}
        <a href="/accounts/{{ account_id }}/and/{{ tag_name }}">{{ 'account_and_tag.only_paired_reset'|trans }}</a>
    </p>
    {% endif %}

    <table class="table">
        <thead>
        <tr>
            <th>{{ 'account_and_tag.accounts'|trans }}</th>
            <th>{{ 'account_and_tag.out'|trans }}</th>
            <th>{{ 'account_and_tag.in'|trans }}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for link in links %}
            <tr>
                <td>{{ include('account_link.twig', {data: link.contact}, with_context = false) }}</td>
                <td>{% if link.out %}◉{% else %}◯{% endif %}</td>
                <td>{% if link.in %}◉{% else %}◯{% endif %}</td>
                <td>
                    {% if is_pair %}
                        {% if link.out and link.in %}
                            🟢
                        {% elseif is_pair_strong %}
                            🔴
                        {% else %}
                            🟡
                        {% endif %}
                    {% else %}
                        ·
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <ul class="block">
        {% if not only_paired %}
        <li>
            <a href="/accounts/{{ account_id }}/and/{{ tag_name }}/?only_paired=true">🟢 {{ 'account_and_tag.display_only_paired'|trans }}</a>
        </li>
        {% endif %}
        <li>
            <a href="/editor/{{ account_id }}/?tag={{ tag_name }}">✏️ Edit tag «{{ tag_name }}» for <span class="account_name">{{ account_display_name }}</span></a>
{#            {{ 'account_page.this_account_and'|trans }}#}
        </li>
    </ul>


{% endblock %}
