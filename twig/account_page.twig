{% extends "page.twig" %}

{% block title %}{{ display_name }} — {{ 'nav.accounts'|trans }}{% endblock %}

{% block breadcrumbs %}
        <li><a href="/" aria-current="page">BSN</a></li>
        <li><a href="/accounts/" aria-current="page">{{ 'nav.accounts'|trans }}</a></li>
        <li class="is-active"><a href="#" aria-current="page">{{ account_short_id }}</a></li>
{% endblock %}

{% block content %}
<h1 class="title">{{ display_name }}
        {% if is_logged %}
        <a class="button is-outlined {% if not is_contact  %}is-warning{% else %}is-primary{% endif %}"
           href="/contacts/{{ account_id }}"
           title="{% if is_contact  %}{{ 'account_page.contact_button.edit'|trans }}{% else %}{{ 'account_page.contact_button.add'|trans }}{% endif %}"
        ><span class="icon"><i class="fa-regular fa-address-book"></i></span></a>
        {% if session.stellar_id %}
        <a class="button is-outlined is-primary"
           href="/editor/{{ session.stellar_id }}/?id={{ account_id }}"
           title="{{ 'account_page.edit_button'|trans }}"
        ><span class="icon"><i class="fa-regular fa-square-check"></i></span></a>
        {% endif %}
        {% endif %}
</h1>
<h1 class="subtitle">
        <span class="stellar_address is-family-monospace">{{ account_id }}</span><br>
        <a href="https://bsn.mtla.me/editor/{{ account_id }}">{{ 'account_page.edit_button'|trans }}</a><br>
        {{ 'account_page.alternatives'|trans }}: <a class="tag is-primary" href="https://stellar.expert/explorer/public/account/{{ account_id }}">Stellar.Expert</a>
        <a class="tag is-info" href="https://scopuly.com/account/{{ account_id }}">Scopuly</a>
        <a class="tag is-warning" href="https://bsn.brainbox.no/accounts/{{ account_id }}">BrainBox</a>
        <br>
        {% if session.show_telegram_usernames and telegram_username %}
        Telegram: <a href="https://t.me/{{ telegram_username }}">@{{ telegram_username }}</a>{% endif %}<br>
        BSN score: {{ bsn_score }}
</h1>
<h1 class="subtitle"></h1>
{% if name or about or website %}
<dl class="box">
    {% if name %}
        <dt class="title is-4">{{ 'account_page.name'|trans }}</dt>
        <dd class="subtitle is-4">
            {% for item in name %}
                {{ item }}<br>
            {% endfor %}
        </dd>
    {% endif %}
    {% if about %}
        <dt class="title is-4">{{ 'account_page.about'|trans }}</dt>
        <dd class="subtitle is-4">
            {% for item in about %}
                {{ item }}<br>
            {% endfor %}
        </dd>
    {% endif %}
    {% if website %}
        <dt class="title is-4">{{ 'account_page.website'|trans }}</dt>
        <dd class="subtitle is-4">
            {% for item in website %}
                <a href="{{ item }}">{{ item }}</a><br>
            {% endfor %}
        </dd>
    {% endif %}
</dl>
{% endif %}

<div class="columns">
<div class="column">
<h2 class="title">{{ 'account_page.income_tags.header'|trans }} <span class="icon" style="margin-left: 0.3em;"><i class="fa-solid fa-flip-vertical fa-arrow-right-to-bracket" style="transform: scaleX(-1); display: inline-block;"></i></span></h2>
<p class="block">{{ 'account_page.income_tags.description'|trans }}</p>
{% if income_tags %}
{% for tag in income_tags %}
<dl class="block">
        <dt class="title is-4">{{ tag.name }} <a href="/tags/{{ tag.name }}">→</a></dt>
        {% for account_id, link in tag.links %}
                <dd>
                {% if tag.pair %}{% if link.has_pair %}🟢{% elseif tag.pair_strong %}🔴{% else %}🟡{% endif %}{% else %}⚪️{% endif %}
                {{ include('account_link.twig', {id: account_id, name: link.display_name}, with_context = false) }}
                </dd>
        {% endfor %}
</dl>
{% endfor %}
{% else %}
<p>{{ 'account_page.no_income_tags'|trans }}</p>
{% endif %}
</div>

<div class="column">
<h2 class="title">{{ 'account_page.outcome_tags.header'|trans }} <span class="icon" style="margin-left: 0.3em;"><i class="fa-solid fa-arrow-right-from-bracket"></i></span></h2>
<p class="block">{{ 'account_page.outcome_tags.description'|trans }}</p>
{% if outcome_tags %}
{% for tag in outcome_tags %}
<dl class="block">
        <dt class="title is-4">{{ tag.name }} <a href="/tags/{{ tag.name }}">→</a></dt>
        {% for account_id, link in tag.links %}
                <dd>
                {% if tag.pair %}{% if link.has_pair %}🟢{% elseif tag.pair_strong %}🔴{% else %}🟡{% endif %}{% else %}⚪️{% endif %}
                {{ include('account_link.twig', {id: account_id, name: link.display_name}, with_context = false) }}
                </dd>
        {% endfor %}
</dl>
{% endfor %}
{% else %}
<p>{{ 'account_page.no_outcome_tags'|trans }}</p>
{% endif %}
</div>
</div>
{% if income_tags or outcome_tags %}
<p class="block"><a href="/accounts/{{ account_id }}/and/">🪢 {{ 'account_page.this_account_and'|trans }}</a></p>
{% endif %}

{% endblock %}
