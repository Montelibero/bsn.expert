{% extends "page.twig" %}

{% block title %}{{ 'nav.editor'|trans }}{% endblock %}

{% block breadcrumbs %}
    <li><a href="/" aria-current="page">{{ 'common.short_name'|trans }}</a></li>
    <li class="is-active"><a href="#" aria-current="page">{{ 'nav.editor'|trans }}</a></li>
{% endblock %}


{% block content %}
    <style>
        .clickable {
            cursor: pointer;
        }
    </style>

    <script>
    $(document).ready(function() {
        const $for_tag = $('#tag');
        const $for_contact = $('#contact');
        const $additional_options_title = $('#additional_options_title');
        const $additional_options_content = $('#additional_options_content');

        const initial_open_state = $for_tag.val() !== '' || $for_contact.val() !== '';

        $additional_options_content.toggle(initial_open_state);

        $additional_options_title
            .find('.icon')
                .removeClass('is-hidden')
            .find('i')
                .toggleClass('fa-angle-down', initial_open_state)
                .toggleClass('fa-angle-right', !initial_open_state);
        $additional_options_title.addClass('clickable');

        $additional_options_title.on('click', function() {
            $additional_options_content.slideToggle();
            $additional_options_title.find('i')
                .toggleClass('fa-angle-down')
                .toggleClass('fa-angle-right');
        });
    });
    </script>
    <h1 class="title">{{ 'nav.editor'|trans }}</h1>
    <form action="/editor/">
        <div class="field">
            <label class="label" for="stellar_account_id">{{ 'editor.stellar_account'|trans }}</label>
            <input
                    id="stellar_account_id"
                    class="input"
                    type="text"
                    name="id"
                    placeholder="G..."
                    value="{{ default_id }}"
                    maxlength="56"
            />
            <p class="help">{{ 'editor.form.stellar_account_help'|trans }}</p>
        </div>
    <h2 class="title is-5" id="additional_options_title"><span class="icon is-hidden"><i class="fas fa-angle-down"></i></span>{{ 'editor.form.additional_options'|trans }}</h2>
        <div class="columns" id="additional_options_content">
            <div class="column">
                <div class="field">
                    <label class="label" for="tag">{{ 'editor.form.tag_only'|trans }}</label>
                    <input
                            id="tag"
                            class="input"
                            type="text"
                            name="tag"
                            placeholder="TagName"
                            value="{{ single_tag }}"
                            maxlength="56"
                    />
                </div>
                <p class="help">{{ 'editor.form.tag_help'|trans }}</p>
            </div>
            <div class="column">
                <div class="field">
                    <label class="label" for="contact">{{ 'editor.form.contact_only'|trans }}</label>
                    <input
                            id="contact"
                            class="input"
                            type="text"
                            name="contact"
                            placeholder="G..."
                            value="{{ single_contact }}"
                            maxlength="56"
                    />
                </div>
                <p class="help">{{ 'editor.form.contact_help'|trans }}</p>
            </div>
        </div>
        <div class="field is-grouped">
            <div class="control">
                <input type="reset" class="button is-light" value="Reset">
            </div>
            <div class="control">
                <input type="submit" class="button is-link" value="Edit â†’">
            </div>
        </div>
    </form>
{% endblock %}

